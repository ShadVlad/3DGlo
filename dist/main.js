(()=>{"use strict";const e=e=>{console.log("form: ",e.id);const t=document.createElement("div");t.style.cssText="font-size: 2rem;","form3"===e.id&&(t.style.color="white"),e.addEventListener("submit",(r=>{r.preventDefault(),e.appendChild(t);const n=new FormData(e);let c={};n.forEach(((e,t)=>{c[t]=e})),a(c).then((e=>{if(200!==e.status)throw new Error("status network not 200");t.textContent="Спасибо! Мы скоро с Вами свяжемся!",o()})).catch((()=>{t.textContent="Что-то пошло не так..."}))}));const a=e=>fetch("server.php",{metod:"POST",body:JSON.stringify(e),headers:{"Content-Type":"application/json"}}),o=()=>{const t=e.querySelector("input[name='user_name']"),a=e.querySelector("input[name='user_email']"),o=e.querySelector("input[name='user_message']"),r=e.querySelector("input[name='user_phone']");t.value="",a.value="",r.value="",o&&(o.value="")}};(function(e){let t=document.querySelector("#timer-hours"),a=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function r(e){return e<10?"0"+e:e}function n(){let e=function(){let e=new Date("30 july 2021").getTime(),t=(new Date).getTime(),a=e-t>0?(e-t)/1e3:0,o=Math.floor(a%60),r=Math.floor(a/60%60);return{timeRemaining:a,hours:Math.floor(a/60/60%24),minutes:r,seconds:o}}();t.textContent=r(e.hours),a.textContent=r(e.minutes),o.textContent=r(e.seconds)}n(),setInterval(n,1e3)})(),(()=>{const e=document.querySelector(".menu"),t=document.querySelector("menu"),a=()=>{t.classList.toggle("active-menu")};e.addEventListener("click",a),t.addEventListener("click",(e=>{let t=e.target;(t.classList.contains("close-btn")||"A"===t.tagName)&&a()}))})(),(()=>{const e=document.querySelector(".popup"),t=document.querySelector("body"),a=document.querySelector(".popup-content"),o=document.querySelectorAll(".popup-btn");let r,n;const c=()=>{r=requestAnimationFrame(c),n++,n<38?a.style.left=n+"%":cancelAnimationFrame(r)};o.forEach((a=>{a.addEventListener("click",(()=>{e.style.display="block",n=-50,t.offsetWidth>=768&&(r=requestAnimationFrame(c))}))})),e.addEventListener("click",(t=>{let a=t.target;a.classList.contains("popup-close")?e.style.display="none":(a=a.closest(".popup-content"),a||(e.style.display="none"))}))})(),(()=>{const e=document.querySelector(".service-header"),t=document.querySelectorAll(".service-header-tab"),a=document.querySelectorAll(".service-tab");e.addEventListener("click",(e=>{let o=e.target;console.log("target: ",o),o=o.closest(".service-header-tab"),console.log("target: ",o),o&&t.forEach(((e,r)=>{e===o&&(e=>{for(let o=0;o<a.length;o++)e===o?(t[o].classList.add("active"),a[o].classList.remove("d-none")):(t[o].classList.remove("active"),a[o].classList.add("d-none"))})(r)}))}))})(),(()=>{const e=document.querySelectorAll(".portfolio-item"),t=(document.querySelectorAll(".portfolio-btn"),document.querySelector(".portfolio-dots")),a=document.querySelector(".portfolio-content");let o,r,n=0;const c=(e,t,a)=>{e[t].classList.remove(a)},l=(e,t,a)=>{e[t].classList.add(a)},s=()=>{c(e,n,"portfolio-item-active"),c(o,n,"dot-active"),n++,n%=e.length,l(e,n,"portfolio-item-active"),l(o,n,"dot-active")},u=(e=3e3)=>{r=setInterval(s,e)};a.addEventListener("click",(t=>{t.preventDefault();let a=t.target;a.matches(".portfolio-btn, .dot")&&(c(e,n,"portfolio-item-active"),c(o,n,"dot-active"),a.matches("#arrow-right")?n++:a.matches("#arrow-left")?n--:a.matches(".dot")&&o.forEach(((e,t)=>{e===a&&(n=t)})),n>=e.length&&(n=0),n<0&&(n=e.length-1),l(e,n,"portfolio-item-active"),l(o,n,"dot-active"))})),a.addEventListener("mouseover",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(r)})),a.addEventListener("mouseout",(e=>{(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&u()})),(()=>{for(let a=1;a<=e.length;a++){let e=document.createElement("li");e.classList.add("dot"),1===a&&e.classList.add("dot-active"),t.append(e)}o=document.querySelectorAll(".dot")})(),u(1500)})(),(()=>{const e=document.querySelector(".command");e.addEventListener("mouseover",(e=>{e.target.matches(".command__photo")&&(e.target.src=e.target.dataset.img)})),e.addEventListener("mouseout",(e=>{e.target.matches(".command__photo")&&(e.target.src=e.target.dataset.img.replace("a.","."))}))})(),((e=100)=>{const t=document.querySelector(".calc-block"),a=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),r=document.querySelector(".calc-day"),n=document.querySelector(".calc-count"),c=document.getElementById("total"),l=document.querySelectorAll(".calc-item");t.addEventListener("change",(t=>{const l=t.target;(l.matches("select")||l.matches("input"))&&(()=>{let t=0,l=1,s=1;const u=a.options[a.selectedIndex].value,i=+o.value;n.value>1&&(l+=(n.value-1)/10),r.value&&r.value<5?s*=2:r.value&&r.value<10&&(s*=1.5),u&&i?(t=e*u*i*l*s,t=1.4==u?t.toFixed(2):t):t=0,c.textContent=t})()}));const s=e=>{e.target.value=e.target.value.replace(/[^0-9]/,"")};l.forEach((e=>{e.addEventListener("keyup",s)}))})(100),(()=>{const e=document.querySelectorAll("form"),t=document.querySelectorAll("input[name='user_name']"),a=document.querySelectorAll("input[name='user_message']"),o=document.querySelectorAll("input[name='user_email']"),r=document.querySelectorAll("input[name='user_phone']"),n=()=>{let e=event.target.value.replace(/\-{2,}/g,"-");e=e.split(/\s+/),event.target.value=e.map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" ")},c=()=>{let e=event.target.value.replace(/\-{2,}/g,"-");e=e.split(/\s+/),e[0]=e[0].charAt(0).toUpperCase()+e[0].slice(1),event.target.value=e.map((e=>e)).join(" ")},l=()=>{let e=event.target.value.replace(/[^\d\+]/,"");e=e.replace(/\-{2,}/g,"-"),event.target.value=e},s=()=>{let e=event.target.value.replace(/[^A-Za-z\.\@\-\!\*\'\~]/g,"");e=e.replace(/\-{2,}/g,"-"),e=e.replace(/\-/,""),e=e.replace(/\-$/,""),event.target.value=e};e.forEach((e=>{e.addEventListener("keyup",(e=>{e.target.matches("input[name='user_name']")?(e=>{e.target.value=e.target.value.replace(/[^А-Яа-яЁё\s]+$/,"")})(e):e.target.matches("input[name='user_message']")?(e=>{e.target.value=e.target.value.replace(/[^?!,.а-яА-ЯёЁ0-9]+$/,"")})(e):e.target.matches("input[name='user_email']")?(e=>{e.target.value=e.target.value.replace(/[^A-Za-z\.\@\-\!\*\'\~]/,"")})(e):e.target.matches("input[name='user_phone']")&&(e=>{e.target.value=e.target.value.replace(/[^\d\+]/,"")})(e)}))})),t.forEach((e=>{e.addEventListener("blur",(e=>{n()}))})),a.forEach((e=>{e.addEventListener("blur",(e=>{c()}))})),r.forEach((e=>{e.addEventListener("blur",(e=>{l()}))})),o.forEach((e=>{e.addEventListener("blur",(e=>{s()}))}))})();for(let t=1;t<4;t++)e(document.getElementById("form"+t))})();