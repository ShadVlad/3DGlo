(()=>{"use strict";const e=function(e){var t=document.querySelector(".popup");console.log("form: ",e.id);var n=document.createElement("div");n.style.cssText="font-size: 2rem;","form3"===e.id&&(n.style.color="white"),e.addEventListener("submit",(function(r){r.preventDefault();var c=new FormData(e),u={};c.forEach((function(e,t){u[t]=e,console.log("key: "+t+" val: "+e)})),u.user_name.length<2?alert("Имя должно содержать от 2 до 30 символов"):u.user_phone.length<7||u.user_phone.length>12?alert("Номер телефона должен содержать от 7 до 12 символов с учетом плюса!"):(n.textContent="Загрузка...",e.appendChild(n),o(u).then((function(e){if(200!==e.status)throw new Error("status network not 200");n.textContent="Спасибо! Мы скоро с Вами свяжемся!",a(),setTimeout((function(){t.style.display="none"}),5e3)})).catch((function(){n.textContent="Что-то пошло не так..."})))}));var o=function(e){return fetch("server.php",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)})},a=function(){var t=e.querySelector("input[name='user_name']"),n=e.querySelector("input[name='user_email']"),o=e.querySelector("input[name='user_message']"),a=e.querySelector("input[name='user_phone']");t.value="",n.value="",a.value="",o&&(o.value="")}};var t,n,o,a,r,c,u,l,i,s,d,m,v,f,p,g,h,y,q,S,E,L,A,_,b,k,C,x,w,I,T,D,F,j;(function(e){var t=document.querySelector("#timer-hours"),n=document.querySelector("#timer-minutes"),o=document.querySelector("#timer-seconds");function a(e){return e<10?"0"+e:e}function r(){var e,r,c,u,l,i=(c=(e=new Date("30 july 2021").getTime())-(r=(new Date).getTime())>0?(e-r)/1e3:0,u=Math.floor(c%60),l=Math.floor(c/60%60),{timeRemaining:c,hours:Math.floor(c/60/60%24),minutes:l,seconds:u});t.textContent=a(i.hours),n.textContent=a(i.minutes),o.textContent=a(i.seconds)}r(),setInterval(r,1e3)})(),D=document.querySelector(".menu"),F=document.querySelector("menu"),j=function(){F.classList.toggle("active-menu")},D.addEventListener("click",j),F.addEventListener("click",(function(e){var t=e.target;(t.classList.contains("close-btn")||"A"===t.tagName)&&j()})),C=document.querySelector(".popup"),x=document.querySelector("body"),w=document.querySelector(".popup-content"),I=document.querySelectorAll(".popup-btn"),T=function e(){b=requestAnimationFrame(e),(k+=5)<38?w.style.left=k+"%":cancelAnimationFrame(b)},I.forEach((function(e){e.addEventListener("click",(function(){C.style.display="block",k=-50,x.offsetWidth>=768&&(b=requestAnimationFrame(T))}))})),C.addEventListener("click",(function(e){var t=e.target;t.classList.contains("popup-close")?C.style.display="none":(t=t.closest(".popup-content"))||(C.style.display="none")})),E=document.querySelector(".service-header"),L=document.querySelectorAll(".service-header-tab"),A=document.querySelectorAll(".service-tab"),(_=function(e){for(var t=0;t<A.length;t++)e===t?(L[t].classList.add("active"),A[t].classList.remove("d-none")):(L[t].classList.remove("active"),A[t].classList.add("d-none"))})(0),E.addEventListener("click",(function(e){var t=e.target;console.log("target: ",t),t=t.closest(".service-header-tab"),console.log("target: ",t),t&&L.forEach((function(e,n){e===t&&_(n)}))})),v=document.querySelectorAll(".portfolio-item"),document.querySelectorAll(".portfolio-btn"),f=document.querySelector(".portfolio-dots"),p=document.querySelector(".portfolio-content"),g=0,h=function(e,t,n){e[t].classList.remove(n)},y=function(e,t,n){e[t].classList.add(n)},q=function(){h(v,g,"portfolio-item-active"),h(d,g,"dot-active"),g++,g%=v.length,y(v,g,"portfolio-item-active"),y(d,g,"dot-active")},S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3e3;m=setInterval(q,e)},p.addEventListener("click",(function(e){e.preventDefault();var t=e.target;t.matches(".portfolio-btn, .dot")&&(h(v,g,"portfolio-item-active"),h(d,g,"dot-active"),t.matches("#arrow-right")?g++:t.matches("#arrow-left")?g--:t.matches(".dot")&&d.forEach((function(e,n){e===t&&(g=n)})),g>=v.length&&(g=0),g<0&&(g=v.length-1),y(v,g,"portfolio-item-active"),y(d,g,"dot-active"))})),p.addEventListener("mouseover",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&clearInterval(m)})),p.addEventListener("mouseout",(function(e){(e.target.matches(".portfolio-btn")||e.target.matches(".dot"))&&S()})),function(){for(var e=1;e<=v.length;e++){var t=document.createElement("li");t.classList.add("dot"),1===e&&t.classList.add("dot-active"),f.append(t)}d=document.querySelectorAll(".dot")}(),S(1500),(s=document.querySelector(".command")).addEventListener("mouseover",(function(e){e.target.matches(".command__photo")&&(e.target.src=e.target.dataset.img)})),s.addEventListener("mouseout",(function(e){e.target.matches(".command__photo")&&(e.target.src=e.target.dataset.img.replace("a.","."))})),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,t=document.querySelector(".calc-block"),n=document.querySelector(".calc-type"),o=document.querySelector(".calc-square"),a=document.querySelector(".calc-day"),r=document.querySelector(".calc-count"),c=document.getElementById("total"),u=document.querySelectorAll(".calc-item"),l=function(){var t=0,u=1,l=1,i=n.options[n.selectedIndex].value,s=+o.value;r.value>1&&(u+=(r.value-1)/10),a.value&&a.value<5?l*=2:a.value&&a.value<10&&(l*=1.5),i&&s?(t=e*i*s*u*l,t=1.4==i?t.toFixed(0):t):t=0,c.textContent=t};t.addEventListener("change",(function(e){var t=e.target;(t.matches("select")||t.matches("input"))&&l()}));var i=function(e){e.target.value=e.target.value.replace(/[^0-9]/,"")};u.forEach((function(e){e.addEventListener("keyup",i)}))}(100),t=document.querySelectorAll("form"),n=document.querySelectorAll("input[name='user_name']"),o=document.querySelectorAll("input[name='user_message']"),a=document.querySelectorAll("input[name='user_email']"),r=document.querySelectorAll("input[name='user_phone']"),c=function(){var e=event.target.value.replace(/\-{2,}/g,"-");e=e.split(/\s+/),event.target.value=e.map((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})).join(" ")},u=function(){var e=event.target.value.replace(/\-{2,}/g,"-");(e=e.split(/\s+/))[0]=e[0].charAt(0).toUpperCase()+e[0].slice(1),event.target.value=e.map((function(e){return e})).join(" ")},l=function(){var e=event.target.value.replace(/[^\d\+]/,"");console.log("val: ",e.length),e=e.replace(/\-{2,}/g,"-"),event.target.value=e},i=function(){var e=event.target.value.replace(/[^A-Za-z\.\@\-\!\*\'\~]/g,"");e=(e=(e=e.replace(/\-{2,}/g,"-")).replace(/\-/,"")).replace(/\-$/,""),event.target.value=e},t.forEach((function(e){e.addEventListener("keyup",(function(e){e.target.matches("input[name='user_name']")?function(e){e.target.value=e.target.value.replace(/[^А-Яа-яЁё\s]+$/,"")}(e):e.target.matches("input[name='user_message']")?function(e){e.target.value=e.target.value.replace(/[^?!,.а-яА-ЯёЁ0-9]+$/,"")}(e):e.target.matches("input[name='user_email']")?function(e){e.target.value=e.target.value.replace(/[^A-Za-z\.\@\-\!\*\'\~]/,"")}(e):e.target.matches("input[name='user_phone']")&&function(e){e.target.value=e.target.value.replace(/[^\d\+]/,"")}(e)}))})),n.forEach((function(e){e.addEventListener("blur",(function(e){c()}))})),o.forEach((function(e){e.addEventListener("blur",(function(e){u()}))})),r.forEach((function(e){e.addEventListener("blur",(function(e){e.target.value,l()}))})),a.forEach((function(e){e.addEventListener("blur",(function(e){i()}))}));for(var z=1;z<4;z++)e(document.getElementById("form"+z))})();